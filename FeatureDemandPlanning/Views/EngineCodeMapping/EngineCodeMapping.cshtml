@using FeatureDemandPlanning.BusinessObjects
@using enums = FeatureDemandPlanning.Enumerations

@model FeatureDemandPlanning.Models.EngineCodeMappingViewModel

@section PageScripts{
    <script src="@Url.Content("~/Scripts/Shared/namespace.js")?v=@SharedModelBase.CurrentVersion"></script>
    <script src="@Url.Content("~/Scripts/Shared/vehicle.js")?v=@SharedModelBase.CurrentVersion"></script>
    <script src="@Url.Content("~/Scripts/Admin/enginecodemapping.js")?v=@SharedModelBase.CurrentVersion"></script>
    <script src="@Url.Content("~/Scripts/Admin/enginecodemappingpage.js")?v=@SharedModelBase.CurrentVersion"></script>
    <script type="text/javascript">

    var params = {
        EngineCodeMappingsUri: "@Url.Action("EngineCodeMappings")",
        EngineCodeMappingsEditUri: "@Url.Action("EditEngineCodeMapping")",
        FilterVehiclesUri: "@Url.Action("FilterVehicles", "Vehicle")",
        DeleteUri: "@Url.Action("DeleteEngineCode")",
        AddUri: "@Url.Action("AddEngineCode")",
        Configuration: {},
        EngineCodeMappings: {},
        PageSize: @Model.PageSize,
        PageIndex: @Model.PageIndex
    };

    params.Configuration = @Html.Raw(Json.Encode(Model.Configuration));
    params.EngineCodeMappings = @Html.Raw(Json.Encode(Model.EngineCodeMappings));

    var engineCodeMapping = new FeatureDemandPlanning.EngineCodeMapping.EngineCodeMapping(params);
    var vehicle = new FeatureDemandPlanning.Vehicle.Vehicle(params);
    var page = new FeatureDemandPlanning.EngineCodeMapping.Page([engineCodeMapping, vehicle]);

    $(document).ready(function ()
    {
        page.initialise();
    });

    </script>

}

@section PageContentHeader
{
    <div class="row">
        <div class="col-lg-12 text-center inverse">
            <img src="~/Content/Images/Icons/mapping128.png" style="opacity:0.9;border:0" />

            <h1 style="height:66px">Map Engine Codes</h1>
            <p style="height:60px">Map Engine Codes to OXO Programmes</p>

        </div>
    </div>
}

@section PageBody
{
    <div id="dvFilter" class="row subscribers-notifyFilterComplete">
        <div class="col-lg-10 col-lg-offset-1 pull-left">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-lg-6 pull-left">
                            <div class="panel-title">Filter Mappings</div>
                        </div>
                        <div class="coll-lg-6 text-right" style="padding-right:10px">
                            <span id="numberOfMappings" class="subscribers-notifySuccess badge">@Model.TotalRecords</span>
                        </div>
                    </div>


                </div>

                <div class="panel-body">

                    <form class="form-group-sm">
                        <div class="row">

                            <div class="col-lg-3">
                                <label class="control-label inverse" for="ddlMake">Make</label>
                                <select class="form-control subscribers-notifyMakes" id="ddlMake"></select>
                            </div>

                            <div class="col-lg-4">
                                <label class="control-label inverse" for="ddlProgramme">Programme</label>
                                <select class="form-control subscribers-notifyProgrammes" id="ddlProgramme"></select>
                            </div>

                            <div class="col-lg-3">
                                <label class="control-label inverse" for="ddlModelYear">Model Year</label>
                                <select class="form-control subscribers-notifyModelYears" id="ddlModelYear"></select>
                            </div>

                            <div class="col-lg-2">
                                <label class="control-label inverse" for="txtEngineCode">Engine Code</label>
                                <input type="text" class="form-control" id="txtEngineCode" name="txtEngineCode" />
                            </div>

                        </div>
                    </form>


                </div>
            </div>
        </div>

    </div>

    <div>

        <div id="notifier" class="subscribers-notifySuccess subscribers-notifyError col-lg-11 col-lg-offset-1">

        </div>

        <div class="row">
            <div class="col-lg-10 col-lg-offset-1">

                <div id="dvEngineCodeMappings" class="row subscribers-notifyResults" style="margin-top:20px">
                    @{Html.RenderPartial("EngineCodeMappings", Model);}
                </div>
            </div>

        </div>

    </div>

}


