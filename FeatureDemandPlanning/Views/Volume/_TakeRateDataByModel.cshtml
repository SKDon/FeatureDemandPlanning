@using enums = FeatureDemandPlanning.Model.Enumerations

@model FeatureDemandPlanning.Model.ViewModel.FdpOxoVolumeViewModel

<th class="cross-tab-data-item feature-description">Description</th>
<th class="cross-tab-data-item feature-code">Code</th>
<th class="text-right model-mix">
    @if (Model.Volume.Mode == enums.TakeRateResultMode.PercentageTakeRate)
    {
        @:% Mix
    }
    else
    {
        @:Volume
    }
</th>
@foreach (var availableModel in Model.Volume.Vehicle.AvailableModels)
{
    var modelClassName = string.Empty;
    if (availableModel.FdpModelId.HasValue)
    {
        modelClassName = "fdp-model";
    }
    if (Model.Volume.Mode == enums.TakeRateResultMode.PercentageTakeRate)
    {
        <th class="text-center model-mix editable-header @modelClassName">
            @{
        var summary = Model.Volume.VolumeData.TakeRateSummaryByModel.Where(s => s.StringIdentifier == availableModel.StringIdentifier).FirstOrDefault();
        var percentage = "-";
        if (summary != null)
        {
            percentage = string.Format("{0:P2}", summary.PercentageOfFilteredVolume);
        }
        @percentage
            }
        </th>
    }
    else
    {
        <th class="text-center model-mix editable-header @modelClassName" data-target="@availableModel.StringIdentifier">
            @{
        var summary = Model.Volume.VolumeData.TakeRateSummaryByModel.Where(s => s.StringIdentifier == availableModel.StringIdentifier).FirstOrDefault();
        var volume = "-";
        if (summary != null)
        {
            volume = summary.Volume.ToString();
        }
        @volume
            }
        </th>
    }
}
